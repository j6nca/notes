/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => ObsifetchPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  customLogo: ""
};
var ObsifetchModal = class extends import_obsidian.Modal {
  constructor(app, logo, vaultInfo, systemInfo) {
    super(app);
    this.logo = logo;
    this.vaultInfo = vaultInfo;
    this.systemInfo = systemInfo;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.addClass("obsifetch-modal");
    contentEl.createEl("div", {
      text: "> obsifetch",
      cls: "obsifetch-title"
    });
    const container = contentEl.createDiv({ cls: "obsifetch-container" });
    const logoSection = container.createDiv({ cls: "logo-section" });
    logoSection.createEl("pre", { text: this.logo });
    const infoSection = container.createDiv({ cls: "info-section" });
    const vaultName = this.app.vault.getName();
    infoSection.createEl("div", {
      text: `${require("os").userInfo().username}@${vaultName.toLowerCase()}`,
      cls: "vault-header"
    });
    infoSection.createEl("div", {
      text: "-".repeat(36),
      cls: "vault-separator"
    });
    const preElement = infoSection.createEl("pre");
    this.vaultInfo.toLowerCase().split("\n").forEach((line) => {
      const [label, value] = line.split(": ");
      const lineDiv = preElement.createDiv();
      lineDiv.createSpan({ text: label + ": ", cls: "stat-label" });
      lineDiv.createSpan({ text: value, cls: "stat-value" });
    });
    this.systemInfo.toLowerCase().split("\n").forEach((line) => {
      const [label, value] = line.split(": ");
      const lineDiv = preElement.createDiv();
      lineDiv.createSpan({ text: label + ": ", cls: "stat-label" });
      lineDiv.createSpan({ text: value, cls: "stat-value" });
    });
    const colorSquares = preElement.createSpan({ cls: "color-squares" });
    const currentRow = colorSquares.createSpan({ cls: "color-row" });
    [
      "--interactive-accent",
      "--text-accent",
      "--text-faint",
      "--text-normal",
      "--text-muted",
      "--text-error",
      "--text-highlight-bg",
      "--background-secondary",
      "--background-primary"
    ].forEach((color) => {
      const square = currentRow.createSpan();
      square.style.backgroundColor = `var(${color})`;
      square.style.width = "1.5em";
      square.style.height = "1.5em";
      square.style.display = "inline-block";
      square.style.marginLeft = "0";
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ObsifetchSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    new import_obsidian.Setting(containerEl).setName("Custom ASCII Logo").setDesc("Paste your custom ASCII art here").addTextArea((text) => text.setPlaceholder("Paste ASCII art here...").setValue(this.plugin.settings.customLogo).onChange(async (value) => {
      this.plugin.settings.customLogo = value;
      await this.plugin.saveSettings();
    }));
  }
};
var ObsifetchPlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.defaultLogo = `        ;++       
      ;;+++X;     
    :;;;;;XXXX    
    :::::XXXXXX   
   ::..::XXXXXX   
   $+   .Xxx+++   
  $$$X  .:++++++  
 X$$$$X$&&$X+;;;+ 
;XXXXX$&$$$$$$;;. 
  XXXX$$$$$XXXX   
    XX$$XXXXXXX   
         ;XXXX     `;
  }
  async getVaultStats() {
    const activeTheme = this.app.customCss.theme || "default";
    const pluginCount = Object.keys(this.app.plugins.manifests).length;
    const allFiles = this.app.vault.getAllLoadedFiles().filter((file) => file instanceof import_obsidian.TFile);
    const markdownFiles = allFiles.filter((file) => file.extension === "md");
    const attachments = allFiles.filter((file) => file.extension !== "md");
    return {
      totalFiles: allFiles.length,
      totalMarkdown: markdownFiles.length,
      totalAttachments: attachments.length,
      totalPlugins: pluginCount,
      theme: activeTheme
    };
  }
  getSystemInfo() {
    var _a;
    const isDarkTheme = document.body.classList.contains("theme-dark");
    let platform = "unknown";
    let osDetails = "";
    if ((_a = navigator.userAgentData) == null ? void 0 : _a.platform) {
      platform = navigator.userAgentData.platform.toLowerCase();
      if (platform === "linux") {
        if (navigator.userAgent.includes("Ubuntu")) {
          osDetails = "ubuntu";
        } else if (navigator.userAgent.includes("Fedora")) {
          osDetails = "fedora";
        } else if (navigator.userAgent.includes("Arch")) {
          osDetails = "arch";
        } else if (navigator.userAgent.includes("Debian")) {
          osDetails = "debian";
        } else {
          osDetails = "linux";
        }
      }
    } else {
      if (navigator.userAgent.includes("Win")) {
        platform = "windows";
      } else if (navigator.userAgent.includes("Mac")) {
        platform = "macos";
      } else if (navigator.userAgent.includes("Linux")) {
        platform = "linux";
      }
    }
    return [
      `appearance: ${isDarkTheme ? "dark" : "light"}`,
      `os: ${osDetails || platform}`
    ].join("\n").trimEnd();
  }
  async displayObsifetch() {
    const stats = await this.getVaultStats();
    const info = this.getSystemInfo();
    const logo = this.settings.customLogo || this.defaultLogo;
    const vaultInfoLines = [
      `total files: ${stats.totalFiles}`,
      `markdown files: ${stats.totalMarkdown}`,
      `attachments: ${stats.totalAttachments}`,
      `plugins: ${stats.totalPlugins}`,
      `theme: ${stats.theme}`
    ].join("\n").trimEnd();
    new ObsifetchModal(
      this.app,
      logo,
      vaultInfoLines,
      info
    ).open();
  }
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new ObsifetchSettingTab(this.app, this));
    console.log("loading obsifetch");
    this.addCommand({
      id: "show-obsifetch",
      name: "Show Obsifetch",
      callback: () => this.displayObsifetch()
    });
    this.ribbonIcon = this.addRibbonIcon(
      "terminal-square",
      "obsifetch",
      (evt) => {
        this.displayObsifetch();
      }
    );
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  onunload() {
    console.log("unloading obsifetch");
    this.ribbonIcon.remove();
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgUGx1Z2luLCBNb2RhbCwgVEZpbGUsIEFwcCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZyB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmludGVyZmFjZSBPYnNpZmV0Y2hTZXR0aW5ncyB7XHJcbiAgICBjdXN0b21Mb2dvOiBzdHJpbmc7XHJcbn1cclxuXHJcbmNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE9ic2lmZXRjaFNldHRpbmdzID0ge1xyXG4gICAgY3VzdG9tTG9nbzogJydcclxufVxyXG5cclxuXHJcbmNsYXNzIE9ic2lmZXRjaE1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcHJpdmF0ZSBsb2dvOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIHZhdWx0SW5mbzogc3RyaW5nO1xyXG4gICAgcHJpdmF0ZSBzeXN0ZW1JbmZvOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIGxvZ286IHN0cmluZywgdmF1bHRJbmZvOiBzdHJpbmcsIHN5c3RlbUluZm86IHN0cmluZykge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5sb2dvID0gbG9nbztcclxuICAgICAgICB0aGlzLnZhdWx0SW5mbyA9IHZhdWx0SW5mbztcclxuICAgICAgICB0aGlzLnN5c3RlbUluZm8gPSBzeXN0ZW1JbmZvO1xyXG4gICAgfVxyXG5cclxuICAgIG9uT3BlbigpIHtcclxuICAgICAgY29uc3Qge2NvbnRlbnRFbH0gPSB0aGlzO1xyXG4gICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ29ic2lmZXRjaC1tb2RhbCcpO1xyXG4gICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHtcclxuICAgICAgICAgIHRleHQ6ICc+IG9ic2lmZXRjaCcsXHJcbiAgICAgICAgICBjbHM6ICdvYnNpZmV0Y2gtdGl0bGUnXHJcbiAgICAgIH0pO1xyXG4gICAgICBjb25zdCBjb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KHtjbHM6ICdvYnNpZmV0Y2gtY29udGFpbmVyJ30pO1xyXG4gIFxyXG4gICAgICBjb25zdCBsb2dvU2VjdGlvbiA9IGNvbnRhaW5lci5jcmVhdGVEaXYoe2NsczogJ2xvZ28tc2VjdGlvbid9KTtcclxuICAgICAgbG9nb1NlY3Rpb24uY3JlYXRlRWwoJ3ByZScsIHt0ZXh0OiB0aGlzLmxvZ299KTtcclxuICBcclxuICAgICAgY29uc3QgaW5mb1NlY3Rpb24gPSBjb250YWluZXIuY3JlYXRlRGl2KHtjbHM6ICdpbmZvLXNlY3Rpb24nfSk7XHJcbiAgICAgIGNvbnN0IHZhdWx0TmFtZSA9IHRoaXMuYXBwLnZhdWx0LmdldE5hbWUoKTtcclxuICAgICAgXHJcbiAgICAgIGluZm9TZWN0aW9uLmNyZWF0ZUVsKCdkaXYnLCB7XHJcbiAgICAgICAgICB0ZXh0OiBgJHtyZXF1aXJlKFwib3NcIikudXNlckluZm8oKS51c2VybmFtZX1AJHt2YXVsdE5hbWUudG9Mb3dlckNhc2UoKX1gLFxyXG4gICAgICAgICAgY2xzOiAndmF1bHQtaGVhZGVyJ1xyXG4gICAgICB9KTtcclxuICBcclxuICAgICAgaW5mb1NlY3Rpb24uY3JlYXRlRWwoJ2RpdicsIHtcclxuICAgICAgICAgIHRleHQ6ICctJy5yZXBlYXQoMzYpLFxyXG4gICAgICAgICAgY2xzOiAndmF1bHQtc2VwYXJhdG9yJ1xyXG4gICAgICB9KTtcclxuICBcclxuICAgICAgY29uc3QgcHJlRWxlbWVudCA9IGluZm9TZWN0aW9uLmNyZWF0ZUVsKCdwcmUnKTtcclxuICAgICAgdGhpcy52YXVsdEluZm8udG9Mb3dlckNhc2UoKS5zcGxpdCgnXFxuJykuZm9yRWFjaChsaW5lID0+IHtcclxuICAgICAgICBjb25zdCBbbGFiZWwsIHZhbHVlXSA9IGxpbmUuc3BsaXQoJzogJyk7XHJcbiAgICAgICAgY29uc3QgbGluZURpdiA9IHByZUVsZW1lbnQuY3JlYXRlRGl2KCk7XHJcbiAgICAgICAgbGluZURpdi5jcmVhdGVTcGFuKHt0ZXh0OiBsYWJlbCArICc6ICcsIGNsczogJ3N0YXQtbGFiZWwnfSk7XHJcbiAgICAgICAgbGluZURpdi5jcmVhdGVTcGFuKHt0ZXh0OiB2YWx1ZSwgY2xzOiAnc3RhdC12YWx1ZSd9KTtcclxuICAgIH0pO1xyXG4gICAgdGhpcy5zeXN0ZW1JbmZvLnRvTG93ZXJDYXNlKCkuc3BsaXQoJ1xcbicpLmZvckVhY2gobGluZSA9PiB7XHJcbiAgICAgICAgY29uc3QgW2xhYmVsLCB2YWx1ZV0gPSBsaW5lLnNwbGl0KCc6ICcpO1xyXG4gICAgICAgIGNvbnN0IGxpbmVEaXYgPSBwcmVFbGVtZW50LmNyZWF0ZURpdigpO1xyXG4gICAgICAgIGxpbmVEaXYuY3JlYXRlU3Bhbih7dGV4dDogbGFiZWwgKyAnOiAnLCBjbHM6ICdzdGF0LWxhYmVsJ30pO1xyXG4gICAgICAgIGxpbmVEaXYuY3JlYXRlU3Bhbih7dGV4dDogdmFsdWUsIGNsczogJ3N0YXQtdmFsdWUnfSk7XHJcbiAgICB9KTtcclxuICBcclxuICAgICAgY29uc3QgY29sb3JTcXVhcmVzID0gcHJlRWxlbWVudC5jcmVhdGVTcGFuKHtjbHM6ICdjb2xvci1zcXVhcmVzJ30pO1xyXG4gICAgICBjb25zdCBjdXJyZW50Um93ID0gY29sb3JTcXVhcmVzLmNyZWF0ZVNwYW4oe2NsczogJ2NvbG9yLXJvdyd9KTtcclxuICAgICAgW1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAnLS1pbnRlcmFjdGl2ZS1hY2NlbnQnLFxyXG4gICAgICAgICAgJy0tdGV4dC1hY2NlbnQnLFxyXG4gICAgICAgICAgJy0tdGV4dC1mYWludCcsXHJcbiAgICAgICAgICAnLS10ZXh0LW5vcm1hbCcsXHJcbiAgICAgICAgICAnLS10ZXh0LW11dGVkJyxcclxuICAgICAgICAgICctLXRleHQtZXJyb3InLFxyXG4gICAgICAgICAgJy0tdGV4dC1oaWdobGlnaHQtYmcnLFxyXG4gICAgICAgICAgJy0tYmFja2dyb3VuZC1zZWNvbmRhcnknLFxyXG4gICAgICAgICAgJy0tYmFja2dyb3VuZC1wcmltYXJ5J1xyXG4gICAgICBdLmZvckVhY2goY29sb3IgPT4ge1xyXG4gICAgICAgICAgY29uc3Qgc3F1YXJlID0gY3VycmVudFJvdy5jcmVhdGVTcGFuKCk7XHJcbiAgICAgICAgICBzcXVhcmUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gYHZhcigke2NvbG9yfSlgO1xyXG4gICAgICAgICAgc3F1YXJlLnN0eWxlLndpZHRoID0gJzEuNWVtJztcclxuICAgICAgICAgIHNxdWFyZS5zdHlsZS5oZWlnaHQgPSAnMS41ZW0nO1xyXG4gICAgICAgICAgc3F1YXJlLnN0eWxlLmRpc3BsYXkgPSAnaW5saW5lLWJsb2NrJztcclxuICAgICAgICAgIHNxdWFyZS5zdHlsZS5tYXJnaW5MZWZ0ID0gJzAnO1xyXG4gICAgICB9KTtcclxuICB9XHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIGNvbnN0IHtjb250ZW50RWx9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufVxyXG5cclxuY2xhc3MgT2JzaWZldGNoU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG4gICAgcGx1Z2luOiBPYnNpZmV0Y2hQbHVnaW47XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogT2JzaWZldGNoUGx1Z2luKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc3BsYXkoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3Qge2NvbnRhaW5lckVsfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdDdXN0b20gQVNDSUkgTG9nbycpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdQYXN0ZSB5b3VyIGN1c3RvbSBBU0NJSSBhcnQgaGVyZScpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0QXJlYSh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignUGFzdGUgQVNDSUkgYXJ0IGhlcmUuLi4nKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmN1c3RvbUxvZ28pXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY3VzdG9tTG9nbyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBPYnNpZmV0Y2hQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgZ2V0VmF1bHRTdGF0cygpIHtcclxuICAgICAgICBjb25zdCBhY3RpdmVUaGVtZSA9IHRoaXMuYXBwLmN1c3RvbUNzcy50aGVtZSB8fCAnZGVmYXVsdCc7XHJcbiAgICAgICAgY29uc3QgcGx1Z2luQ291bnQgPSBPYmplY3Qua2V5cyh0aGlzLmFwcC5wbHVnaW5zLm1hbmlmZXN0cykubGVuZ3RoO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGFsbEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKVxyXG4gICAgICAgICAgICAuZmlsdGVyKGZpbGUgPT4gZmlsZSBpbnN0YW5jZW9mIFRGaWxlKTtcclxuICAgIFxyXG4gICAgICAgIGNvbnN0IG1hcmtkb3duRmlsZXMgPSBhbGxGaWxlc1xyXG4gICAgICAgICAgICAuZmlsdGVyKGZpbGUgPT4gZmlsZS5leHRlbnNpb24gPT09ICdtZCcpO1xyXG4gICAgXHJcbiAgICAgICAgY29uc3QgYXR0YWNobWVudHMgPSBhbGxGaWxlc1xyXG4gICAgICAgICAgICAuZmlsdGVyKGZpbGUgPT4gZmlsZS5leHRlbnNpb24gIT09ICdtZCcpO1xyXG4gICAgXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgdG90YWxGaWxlczogYWxsRmlsZXMubGVuZ3RoLFxyXG4gICAgICAgICAgICB0b3RhbE1hcmtkb3duOiBtYXJrZG93bkZpbGVzLmxlbmd0aCxcclxuICAgICAgICAgICAgdG90YWxBdHRhY2htZW50czogYXR0YWNobWVudHMubGVuZ3RoLFxyXG4gICAgICAgICAgICB0b3RhbFBsdWdpbnM6IHBsdWdpbkNvdW50LFxyXG4gICAgICAgICAgICB0aGVtZTogYWN0aXZlVGhlbWVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxucHJpdmF0ZSBnZXRTeXN0ZW1JbmZvKCk6IHN0cmluZyB7XHJcbiAgY29uc3QgaXNEYXJrVGhlbWUgPSBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5jb250YWlucygndGhlbWUtZGFyaycpO1xyXG4gIGxldCBwbGF0Zm9ybSA9ICd1bmtub3duJztcclxuICBsZXQgb3NEZXRhaWxzID0gJyc7XHJcbiAgXHJcbiAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnREYXRhPy5wbGF0Zm9ybSkge1xyXG4gICAgICBwbGF0Zm9ybSA9IG5hdmlnYXRvci51c2VyQWdlbnREYXRhLnBsYXRmb3JtLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgIGlmIChwbGF0Zm9ybSA9PT0gJ2xpbnV4Jykge1xyXG4gICAgICAgICAgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ1VidW50dScpKSB7XHJcbiAgICAgICAgICAgICAgb3NEZXRhaWxzID0gJ3VidW50dSc7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ0ZlZG9yYScpKSB7XHJcbiAgICAgICAgICAgICAgb3NEZXRhaWxzID0gJ2ZlZG9yYSc7XHJcbiAgICAgICAgICB9IGVsc2UgaWYgKG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ0FyY2gnKSkge1xyXG4gICAgICAgICAgICAgIG9zRGV0YWlscyA9ICdhcmNoJztcclxuICAgICAgICAgIH0gZWxzZSBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnRGViaWFuJykpIHtcclxuICAgICAgICAgICAgICBvc0RldGFpbHMgPSAnZGViaWFuJztcclxuICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgb3NEZXRhaWxzID0gJ2xpbnV4JztcclxuICAgICAgICAgIH1cclxuICAgICAgfVxyXG4gIH0gZWxzZSB7XHJcbiAgICAgIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdXaW4nKSkge1xyXG4gICAgICAgICAgcGxhdGZvcm0gPSAnd2luZG93cyc7XHJcbiAgICAgIH0gZWxzZSBpZiAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmNsdWRlcygnTWFjJykpIHtcclxuICAgICAgICAgIHBsYXRmb3JtID0gJ21hY29zJztcclxuICAgICAgfSBlbHNlIGlmIChuYXZpZ2F0b3IudXNlckFnZW50LmluY2x1ZGVzKCdMaW51eCcpKSB7XHJcbiAgICAgICAgICBwbGF0Zm9ybSA9ICdsaW51eCc7XHJcbiAgICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiBbXHJcbiAgICBgYXBwZWFyYW5jZTogJHtpc0RhcmtUaGVtZSA/ICdkYXJrJyA6ICdsaWdodCd9YCxcclxuICAgIGBvczogJHtvc0RldGFpbHMgfHwgcGxhdGZvcm19YFxyXG5dLmpvaW4oJ1xcbicpLnRyaW1FbmQoKTtcclxufVxyXG5cclxuICBwcml2YXRlIGFzeW5jIGRpc3BsYXlPYnNpZmV0Y2goKSB7XHJcbiAgICBjb25zdCBzdGF0cyA9IGF3YWl0IHRoaXMuZ2V0VmF1bHRTdGF0cygpO1xyXG4gICAgY29uc3QgaW5mbyA9IHRoaXMuZ2V0U3lzdGVtSW5mbygpO1xyXG4gICAgXHJcbiAgICBjb25zdCBsb2dvID0gdGhpcy5zZXR0aW5ncy5jdXN0b21Mb2dvIHx8IHRoaXMuZGVmYXVsdExvZ287XHJcblxyXG4gICAgY29uc3QgdmF1bHRJbmZvTGluZXMgPSBbXHJcbiAgICAgIGB0b3RhbCBmaWxlczogJHtzdGF0cy50b3RhbEZpbGVzfWAsXHJcbiAgICAgIGBtYXJrZG93biBmaWxlczogJHtzdGF0cy50b3RhbE1hcmtkb3dufWAsXHJcbiAgICAgIGBhdHRhY2htZW50czogJHtzdGF0cy50b3RhbEF0dGFjaG1lbnRzfWAsXHJcbiAgICAgIGBwbHVnaW5zOiAke3N0YXRzLnRvdGFsUGx1Z2luc31gLFxyXG4gICAgICBgdGhlbWU6ICR7c3RhdHMudGhlbWV9YFxyXG4gIF0uam9pbignXFxuJykudHJpbUVuZCgpO1xyXG5cclxuICAgIG5ldyBPYnNpZmV0Y2hNb2RhbChcclxuICAgICAgICB0aGlzLmFwcCxcclxuICAgICAgICBsb2dvLCBcclxuICAgICAgICB2YXVsdEluZm9MaW5lcyxcclxuICAgICAgICBpbmZvXHJcbiAgICApLm9wZW4oKTtcclxufVxyXG5cclxuICAgIHNldHRpbmdzOiBPYnNpZmV0Y2hTZXR0aW5ncztcclxuXHJcbiAgICBwcml2YXRlIGRlZmF1bHRMb2dvID0gYCAgICAgICAgOysrICAgICAgIFxyXG4gICAgICA7OysrK1g7ICAgICBcclxuICAgIDo7Ozs7O1hYWFggICAgXHJcbiAgICA6Ojo6OlhYWFhYWCAgIFxyXG4gICA6Oi4uOjpYWFhYWFggICBcclxuICAgJCsgICAuWHh4KysrICAgXHJcbiAgJCQkWCAgLjorKysrKysgIFxyXG4gWCQkJCRYJCYmJFgrOzs7KyBcclxuO1hYWFhYJCYkJCQkJCQ7Oy4gXHJcbiAgWFhYWCQkJCQkWFhYWCAgIFxyXG4gICAgWFgkJFhYWFhYWFggICBcclxuICAgICAgICAgO1hYWFggICAgIGA7XHJcbiAgICBwcml2YXRlIHJpYmJvbkljb246IEhUTUxFbGVtZW50O1xyXG5cclxuICAgIGFzeW5jIG9ubG9hZCgpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgT2JzaWZldGNoU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdsb2FkaW5nIG9ic2lmZXRjaCcpO1xyXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiAnc2hvdy1vYnNpZmV0Y2gnLFxyXG4gICAgICAgICAgICBuYW1lOiAnU2hvdyBPYnNpZmV0Y2gnLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5kaXNwbGF5T2JzaWZldGNoKClcclxuICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgIHRoaXMucmliYm9uSWNvbiA9IHRoaXMuYWRkUmliYm9uSWNvbihcclxuICAgICAgICAgICAgJ3Rlcm1pbmFsLXNxdWFyZScsXHJcbiAgICAgICAgICAgICdvYnNpZmV0Y2gnLFxyXG4gICAgICAgICAgICAoZXZ0OiBNb3VzZUV2ZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlPYnNpZmV0Y2goKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgXHJcbiAgICB9XHJcblxyXG5cclxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuICAgIH1cclxuXHJcbiAgICBvbnVubG9hZCgpIHtcclxuICAgICAgICBjb25zb2xlLmxvZygndW5sb2FkaW5nIG9ic2lmZXRjaCcpO1xyXG4gICAgICAgIHRoaXMucmli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
